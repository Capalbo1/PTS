<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulário Completo de Anamnese</title>
  <link rel="stylesheet" href="assets/styles/avaliação.css">
  <link rel="shortcut icon" href="assets/img/logo.png" type="image/x-icon">
  <!-- Adicione estas bibliotecas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Projeto Terapêutico Singular</h1>
    </header>
    
    <nav>
      <a href="index.html">Triagem</a>
      <a href="comorbidades/comorbidades.html">Comorbidades e riscos</a>
      <a href="avaliação.html" class="active">Avaliação</a>
      <a href="internação.html">Internação</a>
    </nav>
    
    <h1 class="form-title">Anamnese</h1>
    
    <div class="form-container">
    <form id="formulario">
        <!-- Pergunta 1 Modificada -->
    <!-- Exemplo para a Pergunta 1 (faça o mesmo para as outras) -->
    <div class="question-group">
      <div class="main-question">
      <div class="question-text">1. Paciente é dependente?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="dependente" value="sim" onclick="toggleSubquestion('dependencia-details', true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="dependente" value="nao" onclick="toggleSubquestion('dependencia-details', false)"> Não
      </label>
    </div>
  </div>
  <!-- ... -->
</div>
  
  <div id="dependencia-details" class="subquestion" style="display: none;">
    <label>Grau de dependência:</label>
    <div class="option-group">
      <label class="option-label">
        <input type="radio" name="grau_dependencia" value="parcial"> Dependente Parcial
      </label>
      <label class="option-label">
        <input type="radio" name="grau_dependencia" value="total"> Dependente Total
      </label>
    </div>
  </div>
</div>
        
   <!-- Pergunta 2 Modificada -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">2. Paciente está acamado?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="acamado" value="sim" onclick="toggleSubquestion('acamado-details', true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="acamado" value="nao" onclick="toggleSubquestion('acamado-details', false)"> Não
      </label>
    </div>
  </div>
  
  <div id="acamado-details" class="subquestion" style="display: none;">
    <label>Tempo acamado:</label>
    <div class="option-group">
      <label class="option-label">
        <input type="radio" name="tempo_acamado" value="menos_1mes"> 1 á 3 meses
      </label>
      <label class="option-label">
        <input type="radio" name="tempo_acamado" value="1_3meses"> de 3 meses á 1 ano
      </label>
      <label class="option-label">
        <input type="radio" name="tempo_acamado" value="mais_3meses"> Mais de 1 ano 
      </label>
    </div>
  </div>
</div>
        
        <!-- Pergunta 3 -->
        <div class="question-group">
          <div class="main-question">
            <div class="question-text">3.  Deambula sozinho ?</div>
            <div class="answer-options">
              <label class="option-label">
                <input type="radio" name="deambulacao" value="sim" onclick="toggleSubquestion('deambulacao-details', true)"> Sim
              </label>
              <label class="option-label">
                <input type="radio" name="deambulacao" value="nao" onclick="toggleSubquestion('deambulacao-details', false)"> Não
              </label>
            </div>
          </div>
          
          <div id="deambulacao-details" class="subquestion" style="display: none;">
            <label>Tipo de deambulação:</label>
            <div class="option-group">
              <label class="option-label">
                <input type="radio" name="tipo_deambulacao" value="sem_auxilio"> Sem auxílio
              </label>
              <label class="option-label">
                <input type="radio" name="tipo_deambulacao" value="com_auxilio"> Com auxílio
              </label>
            </div>
          </div>
        </div>
        

        
        <!-- Pergunta 4 Modificada  abrir campo outros input text e meta a realizar e se já solicitado --> 
<div class="question-group">
  <div class="main-question">
    <div class="question-text">4. Necessita de Interconsulta?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="interconsulta" value="sim" onclick="toggleSubquestion('interconsulta-details', true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="interconsulta" value="nao" onclick="toggleSubquestion('interconsulta-details', false)"> Não
      </label>
    </div>
  </div>
  
  <div id="interconsulta-details" class="subquestion" style="display: none;">
    <label>Especialidade:</label>
    <div class="option-group">

      <label class="option-label">
        <input type="checkbox" name="especialidade_interconsulta" value="Ortopedia"> Ortopedia
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_interconsulta" value="Cirurgia geral"> Cirurgia geral
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_interconsulta" value="Nefro"> Nefro
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_interconsulta" value="outros" id="outros-interconsulta"> Outros
      </label>
    </div>
    
    <!-- Campo para especificar quando selecionar "Outros" -->
    <div id="outros-interconsulta-detalhes" style="display: none; margin-top: 10px;">
      <label>Especifique:</label>
      <input type="text" name="outra_especialidade">
    </div>
    
  </div>
</div>
         
        
        <!-- Pergunta 5  padrão interconsulta de select para  checked mais de 1  ,  gerar meta realizar documentação  -->
<!-- Pergunta 5 Modificada - Agora com checkboxes para múltiplos encaminhamentos -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">5. Necessita Encaminhamento?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="encaminhamento" value="sim" onclick="toggleSubquestion('encaminhamento-details', true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="encaminhamento" value="nao" onclick="toggleSubquestion('encaminhamento-details', false)"> Não
      </label>
    </div>
  </div>
  
  <div id="encaminhamento-details" class="subquestion" style="display: none;">
    <label>Especialidades para encaminhamento:</label>
    <div class="option-group">
      <label class="option-label">
        <input type="checkbox" name="especialidade_encaminhamento[]" value="Cardiologia"> Cardiologia
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_encaminhamento[]" value="Neurologia"> Neurologia
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_encaminhamento[]" value="Ortopedia"> Ortopedia
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_encaminhamento[]" value="Cirurgia geral"> Cirurgia geral
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_encaminhamento[]" value="Endocrinologia"> Endocrinologia
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_encaminhamento[]" value="Gastroenterologia"> Gastroenterologia
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_encaminhamento[]" value="Nefrologia"> Nefrologia
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_encaminhamento[]" value="Urologia"> Urologia
      </label>
      <label class="option-label">
        <input type="checkbox" name="especialidade_encaminhamento[]" value="outros" id="outros-encaminhamento" onclick="toggleOutrosEncaminhamento(this)"> Outros
      </label>
    </div>
    
    <!-- Campo para especificar quando selecionar "Outros" -->
    <div id="outros-encaminhamento-detalhes" style="display: none; margin-top: 10px;">
      <label>Especifique:</label>
      <input type="text" name="outra_especialidade_encaminhamento">
    </div>
  </div>
</div>
<hr>
        <!-- Pergunta 6 se dificil gerar meta  (passagem de pic) -->
        <div class="question-group">
          <div class="main-question">
            <div class="question-text">6. Acesso Venoso Periférico?</div>
            <div class="answer-options">
              <label class="option-label">
                <input type="radio" name="avp" value="sim" onclick="toggleSubquestion('avp-details', true)"> Sim
              </label>
              <label class="option-label">
                <input type="radio" name="avp" value="nao" onclick="toggleSubquestion('avp-details', false)"> Não
              </label>
            </div>
          </div>
          
          <div id="avp-details" class="subquestion" style="display: none;">
            <label>Dificuldade:</label>
            <select name="dificuldade_avp" onchange="togglePICC(this)">
              <option value="">Selecione</option>
              <option value="facil">Fácil</option>
              <option value="medio">Médio</option>
              <option value="dificil">Difícil</option>
            </select>
          </div>
        </div>
        
        <!-- Pergunta 7 - Lesão por Pressão -->
<!-- Pergunta 7 - Lesão por Pressão os campos de grau para cada check de lesão se sim para ferida meta DE Comissão feridas-->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">7. Lesão por pressão?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="lesao" value="sim" onclick="toggleSubquestion('lesao-details', true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="lesao" value="nao" onclick="toggleSubquestion('lesao-details', false)"> Não
      </label>
    </div>
  </div>
  
  <div id="lesao-details" class="subquestion" style="display: none;">
    <label>Local:</label>
    <div class="option-group">
      <label class="option-label">
        <input type="checkbox" name="local_lesao" value="sacral" onclick="selecionarLocalLesao()"> Sacral
      </label>
      <label class="option-label">
        <input type="checkbox" name="local_lesao" value="calcaneo" onclick="selecionarLocalLesao()"> Calcâneo
      </label>
      <label class="option-label">
        <input type="checkbox" name="local_lesao" value="trocater" onclick="selecionarLocalLesao()"> Trocânter
      </label>
      <label class="option-label">
        <input type="checkbox" name="local_lesao" value="outros" onclick="selecionarLocalLesao()"> Outros
      </label>
    </div>
    
    <!-- Campo para especificar quando selecionar "Outros" -->
    <div id="outros-lesao-detalhes" class="subdetalhe" style="display: none; margin-top: 10px;">
      <label>Especifique o local:</label>
      <input type="text" name="outro_local_lesao">
    </div>
    
    <!-- Campo para selecionar o grau (aparece quando qualquer local é selecionado) -->
    <div id="grau-lesao-container" style="display: none; margin-top: 15px;">
      <label>Grau:</label>
      <div class="option-group">
        <label class="option-label">
          <input type="radio" name="grau_lesao" value="1"> 1
        </label>
        <label class="option-label">
          <input type="radio" name="grau_lesao" value="2"> 2
        </label>
        <label class="option-label">
          <input type="radio" name="grau_lesao" value="3"> 3
        </label>
        <label class="option-label">
          <input type="radio" name="grau_lesao" value="4"> 4
        </label>
      </div>
    </div>
  </div>
</div>


<!-- Pergunta 8 se sim gerar meta de acompanhamento de dispositvo -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">8. Dispositivos?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="dispositivos" value="sim" onclick="toggleDispositivos(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="dispositivos" value="nao" onclick="toggleDispositivos(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="dispositivos-sim-details" class="subquestion" style="display: none;">
    <label>Quais dispositivos:</label>
    <div class="option-group">
      <label class="option-label">
        <input type="checkbox" name="dispositivos_tipo" value="SNE/SNG"> SNE/SNG
      </label>
      <label class="option-label">
        <input type="checkbox" name="dispositivos_tipo" value="GTT"> GTT
      </label>
      <label class="option-label">
        <input type="checkbox" name="dispositivos_tipo" value="SVD/SVA"> SVD/SVA
      </label>
      <label class="option-label">
        <input type="checkbox" name="dispositivos_tipo" value="AVC"> AVC
      </label>
      <label class="option-label">
        <input type="checkbox" name="dispositivos_tipo" value="AVP"> AVP
      </label>
      <label class="option-label">
        <input type="checkbox" name="dispositivos_tipo" value="outros" onclick="toggleOutrosDispositivos(this.checked)"> Outros
      </label>
    </div>
    
    <!-- Campo para especificar outros dispositivos -->
    <div id="outros-dispositivos-detalhe" class="subdetalhe" style="display: none; margin-top: 10px;">
      <label>Especifique outros dispositivos:</label>
      <input type="text" name="outros_dispositivos">
    </div>
  </div>
</div>

<!-- Pergunta 9 se sim e sim OU TALVEZ  meta: Promover  ensino adequado pela Equipe de enfermagem  -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">9. Recebe medicação por SNE/GTT?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="medicacao_sne_gtt" value="sim" onclick="toggleMedicacaoSNEGTT(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="medicacao_sne_gtt" value="nao" onclick="toggleMedicacaoSNEGTT(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="sne-gtt-sim-details" class="subquestion" style="display: none;">
    <div class="subquestion-item">
      <label>Possibilidade de alta com SNE/GTT:</label>
      <div class="option-group">
        <label class="option-label">
          <input type="radio" name="alta_sne_gtt" value="sim" onclick="toggleEnsinoEnfermagem(true)"> Sim
        </label>
        <label class="option-label">
          <input type="radio" name="alta_sne_gtt" value="nao" onclick="toggleEnsinoEnfermagem(false)"> Não
        </label>
        <label class="option-label">
          <input type="radio" name="alta_sne_gtt" value="talvez" onclick="toggleEnsinoEnfermagem(true)"> Talvez
        </label>
      </div>
    </div>

  </div>
</div>

<!-- Pergunta 10 se sim e sim OU TALVEZ  meta: Promover  ensino adequado pela Equipe de enfermagem-->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">10. Necessita banho no leito?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="banho_leito" value="sim" onclick="toggleBanhoLeito(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="banho_leito" value="nao" onclick="toggleBanhoLeito(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="banho-leito-sim-details" class="subquestion" style="display: none;">
    <div class="subquestion-item">
      <label>Possibilidade de banho de leito/trocas pós alta:</label>
      <div class="option-group">
        <label class="option-label">
          <input type="radio" name="possibilidade_banho_leito" value="sim" onclick="toggleEnsinoBanhoLeito(true)"> Sim
        </label>
        <label class="option-label">
          <input type="radio" name="possibilidade_banho_leito" value="nao" onclick="toggleEnsinoBanhoLeito(false)"> Não
        </label>
        <label class="option-label">
          <input type="radio" name="possibilidade_banho_leito" value="talvez" onclick="toggleEnsinoBanhoLeito(true)"> Talvez
        </label>
      </div>
    </div>
  </div>
</div>
<hr>

     <!-- Pergunta 11 SE  NÃO GERAR META -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">11. Suporte nutricional adequado?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="suporte_nutricional" value="sim" onclick="toggleSuporteNutricionalDetails(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="suporte_nutricional" value="nao" onclick="toggleSuporteNutricionalDetails(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta NÃO -->
</div>

<!-- Pergunta 12 se sim e sim OU TALVEZ  meta: Promover  ensino adequado pela Equipe de nutri -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">12. Recebe dieta por  SNE/GTT?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="dieta_sne_gtt" value="sim" onclick="toggleDietaSNEGTT(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="dieta_sne_gtt" value="nao" onclick="toggleDietaSNEGTT(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="dieta-sne-gtt-sim-details" class="subquestion" style="display: none;">
    <div class="subquestion-item">
      <label>Possibilidade de alta com SNE/GTT:</label>
      <div class="option-group">
        <label class="option-label">
          <input type="radio" name="alta_dieta_sne_gtt" value="sim" onclick="toggleEnsinoNutricao(true)"> Sim
        </label>
        <label class="option-label">
          <input type="radio" name="alta_dieta_sne_gtt" value="nao" onclick="toggleEnsinoNutricao(false)"> Não
        </label>
        <label class="option-label">
          <input type="radio" name="alta_dieta_sne_gtt" value="talvez" onclick="toggleEnsinoNutricao(true)"> Talvez
        </label>
      </div>
    </div>
    
  </div>
</div>
<hr>
        <!-- Pergunta 13 -->
      <!-- Pergunta 13 ADD SUBQUESTÕES EM   TODAS OPÇÕES "POSSIBILIDADE DE ALTA COM EWSTE CUIDADO /SIM TALVEZ E NAO SE SIM OU TALVEZ GERAR META." -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">13. Cuidados respiratórios?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="cuidados_respiratorios" value="sim" onclick="toggleCuidadosRespiratorios(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="cuidados_respiratorios" value="nao" onclick="toggleCuidadosRespiratorios(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="cuidados-respiratorios-details" class="subquestion" style="display: none;">
    <label>Quais cuidados? (Marque todos que aplicar)</label>
    <div class="option-group">
      <label class="option-label">
        <input type="checkbox" name="tipo_cuidado" value="oxigenio"> Oxigênio
      </label>
      <label class="option-label">
        <input type="checkbox" name="tipo_cuidado" value="cpap"> CPAP
      </label>
      <label class="option-label">
        <input type="checkbox" name="tipo_cuidado" value="tqt"> TQT
      </label>
      <label class="option-label">
        <input type="checkbox" name="tipo_cuidado" value="outros" onclick="toggleOutrosCuidados(this)"> Outros
      </label>
    </div>
    
    <!-- Campo para especificar outros cuidados -->
    <div id="outros-cuidados-detalhes" class="subdetalhe" style="display: none; margin-top: 10px;">
      <label>Especifique outros cuidados:</label>
      <input type="text" name="outros_cuidados">
    </div>
  </div>
</div>

<!-- Pergunta 14 se sim e sim OU TALVEZ  meta: Promover  ensino adequado pela Equipe de Fisio -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">14. Necessita de aspiração?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="aspiracao_pos_alta" value="sim" onclick="toggleAspiracaoPosAlta(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="aspiracao_pos_alta" value="nao" onclick="toggleAspiracaoPosAlta(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="aspiracao-sim-details" class="subquestion" style="display: none;">
    <div class="subquestion-item">
      <label>Possibilidade de aspiração pós alta:</label>
      <div class="option-group">
        <label class="option-label">
          <input type="radio" name="possibilidade_aspiracao" value="sim" onclick="toggleEnsinoAspiracao(true)"> Sim
        </label>
        <label class="option-label">
          <input type="radio" name="possibilidade_aspiracao" value="nao" onclick="toggleEnsinoAspiracao(false)"> Não
        </label>
        <label class="option-label">
          <input type="radio" name="possibilidade_aspiracao" value="talvez" onclick="toggleEnsinoAspiracao(true)"> Talvez
        </label>
      </div>
    </div>

  </div>
</div>

<hr>

<!-- Pergunta 15 -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">15. Acompanhamento psicológico?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="acompanhamento_psicologico" value="sim" onclick="toggleAcompanhamentoPsicologico(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="acompanhamento_psicologico" value="nao" onclick="toggleAcompanhamentoPsicologico(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="psicologico-sim-details" class="subquestion" style="display: none;">
    <label>Quantas vezes ao mês:</label>
    <div class="option-group">
      <label class="option-label">
        <input type="radio" name="frequencia_psicologico" value="menos_1"> Menos de 1
      </label>
      <label class="option-label">
        <input type="radio" name="frequencia_psicologico" value="1_a_2"> 1 à 2
      </label>
      <label class="option-label">
        <input type="radio" name="frequencia_psicologico" value="2_a_4"> 2 à 4
      </label>
      <label class="option-label">
        <input type="radio" name="frequencia_psicologico" value="mais_4"> Mais de 4
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta NÃO -->
  <div id="psicologico-nao-details" class="subquestion" style="display: none;">
    <label>Motivo:</label>
    <div class="option-group">
      <label class="option-label">
        <input type="radio" name="motivo_sem_psicologico" value="rede_sobrecarregada"> Rede sobrecarregada
      </label>
      <label class="option-label">
        <input type="radio" name="motivo_sem_psicologico" value="nao_procurou"> Não procurou atendimento
      </label>
      <label class="option-label">
        <input type="radio" name="motivo_sem_psicologico" value="outros" onclick="toggleOutrosMotivosPsicologico(true)"> Não necessita de Acompanhamento
      </label>
      <label class="option-label">
        <input type="radio" name="motivo_sem_psicologico" value="outros" onclick="toggleOutrosMotivosPsicologico(true)"> Outros
      </label>
    </div>
    
    <!-- Campo para especificar outros motivos -->
    <div id="outros-motivos-psicologico" class="subdetalhe" style="display: none; margin-top: 10px;">
      <label>Especifique:</label>
      <input type="text" name="outros_motivos_psicologico">
    </div>
  </div>
</div>
<hr>

<!-- Pergunta 16 se sim gerar meta -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">16. Necessita do SAD?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="sad" value="sim" onclick="toggleSubquestion('sad-details', true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="sad" value="nao" onclick="toggleSubquestion('sad-details', false)"> Não
      </label>
    </div>
  </div>
</div>
        
 <!-- Pergunta 17 - Rede de Apoio  se não possui meta -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">17. Possui rede de apoio?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="rede_apoio" value="sim" onclick="toggleSubquestion('rede-apoio-details', true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="rede_apoio" value="nao" onclick="toggleSubquestion('rede-apoio-details', false)"> Não
      </label>
    </div>
  </div>
  
  <div id="rede-apoio-details" class="subquestion" style="display: none;">
    <label>Quantas pessoas pode contar?</label>
    <div class="option-group">
      <label class="option-label">
        <input type="radio" name="quantidade_apoio" value="1-2" onclick="toggleSubquestion('quem-apoio-container', true)"> 1 à 2
      </label>
      <label class="option-label">
        <input type="radio" name="quantidade_apoio" value="2-4" onclick="toggleSubquestion('quem-apoio-container', true)"> 2 à 4
      </label>
      <label class="option-label">
        <input type="radio" name="quantidade_apoio" value="mais-4" onclick="toggleSubquestion('quem-apoio-container', true)"> Mais de 4
      </label>
    </div>
    
    <div id="quem-apoio-container" style="display: none; margin-top: 15px;">
      <label>Quem são (nomes/parentesco):</label>
      <textarea name="quem_apoio" rows="3" placeholder="Ex: Maria - esposa, João - filho..."></textarea>
    </div>
  </div>
</div>
        
       <!-- Pergunta 18 se não meta -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">18. Possuí Lar/residência?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="residencia" value="sim" onclick="toggleResidenciaDetails(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="residencia" value="nao" onclick="toggleResidenciaDetails(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="residencia-sim-details" class="subquestion" style="display: none;">
    <label>Situação:</label>
    <div class="option-group">
      <label class="option-label">
        <input type="radio" name="situacao_residencia" value="sozinho" onclick="toggleSubquestion('morando-sozinho-details', true)"> Mora sozinho
      </label>
      <label class="option-label">
        <input type="radio" name="situacao_residencia" value="com-outros" onclick="toggleSubquestion('morando-com-outros-details', true)"> Mora com outros
      </label>
      <label class="option-label">
        <input type="radio" name="situacao_residencia" value="repouso" onclick="toggleSubquestion('casa-repouso-details', true)"> Casa de repouso
      </label>
    </div>
    
    <!-- Detalhes para quem mora com outros -->
    <div id="morando-com-outros-details" class="subdetalhe" style="display: none;">
      <label>Com quem mora:</label>
      <input type="text" name="quem_mora_com" placeholder="Ex: Filhos, cônjuge, etc.">
    </div>
  </div>
  
    
    <!-- Seção para Rede de Apoio -->
    <div id="rede-apoio-details" class="subdetalhe" style="display: none;">
      <label>Tipo de rede:</label>
      <div class="option-group">
        <label class="option-label">
          <input type="checkbox" name="rede_apoio_tipo" value="familia"> Família
        </label>
        <label class="option-label">
          <input type="checkbox" name="rede_apoio_tipo" value="vizinhos"> Vizinhos
        </label>
        <label class="option-label">
          <input type="checkbox" name="rede_apoio_tipo" value="amigos"> Amigos
        </label>
        <label class="option-label">
          <input type="checkbox" name="rede_apoio_tipo" value="igreja"> Igreja
        </label>
      </div>
    </div>
    
    <!-- Seção para Autoridades -->
    <div id="autoridades-details" class="subdetalhe" style="display: none;">
      <label>Autoridade acionada:</label>
      <div class="option-group">
        <label class="option-label">
          <input type="radio" name="autoridade_acionada" value="conselho_idoso"> Conselho do Idoso
        </label>
        <label class="option-label">
          <input type="radio" name="autoridade_acionada" value="conselho_tutelar"> Conselho Tutelar
        </label>
        <label class="option-label">
          <input type="radio" name="autoridade_acionada" value="outros" onclick="toggleOutrosAutoridades(true)"> Outros
        </label>
      </div>
      
      <!-- Campo para especificar outros -->
      <div id="outros-autoridades-detalhes" class="subdetalhe" style="display: none; margin-top: 10px;">
        <label>Especifique:</label>
        <input type="text" name="outra_autoridade">
      </div>
    </div>
  </div>
</div>

<!-- Pergunta 19 se não meta  -->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">19. Recebe benefício do governo?</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="beneficio" value="sim" onclick="toggleBeneficioDetails(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="beneficio" value="nao" onclick="toggleBeneficioDetails(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="beneficio-sim-details" class="subquestion" style="display: none;">
    <label>Tipo de benefício:</label>
    <div class="option-group">
      <label class="option-label">
        <input type="radio" name="tipo_beneficio" value="bolsa_familia"> Bolsa Família
      </label>
      <label class="option-label">
        <input type="radio" name="tipo_beneficio" value="aposentadoria"> Aposentadoria
      </label>
      <label class="option-label">
        <input type="radio" name="tipo_beneficio" value="inss"> INSS
      </label>
      <label class="option-label">
        <input type="radio" name="tipo_beneficio" value="bpc" onclick="toggleBPCDetails(true)"> BPC (LOAS)
      </label>
    </div>
    
    <!-- Detalhes para BPC -->
    <div id="bpc-details" class="subdetalhe" style="display: none;">
      <label>Tipo de BPC:</label>
      <div class="option-group">
        <label class="option-label">
          <input type="radio" name="tipo_bpc" value="por_idade"> Por idade
        </label>
        <label class="option-label">
          <input type="radio" name="tipo_bpc" value="por_deficiencia"> Por deficiência
        </label>
      </div>
    </div>
  </div>
  
</div>
        
       <!-- Pergunta 20  add campo outros texto se não  meta-->
<div class="question-group">
  <div class="main-question">
    <div class="question-text">20. Possui vinculo com a rede de saúde</div>
    <div class="answer-options">
      <label class="option-label">
        <input type="radio" name="vinculo_saude" value="sim" onclick="toggleVinculoSaudeDetails(true)"> Sim
      </label>
      <label class="option-label">
        <input type="radio" name="vinculo_saude" value="nao" onclick="toggleVinculoSaudeDetails(false)"> Não
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta SIM -->
  <div id="vinculo-sim-details" class="subquestion" style="display: none;">
    <label>Quais serviços possui vínculo? (Marque todos que aplicar)</label>
    <div class="option-group">
      <label class="option-label">
        <input type="checkbox" name="servicos_saude" value="UBS"> UBS
      </label>
      <label class="option-label">
        <input type="checkbox" name="servicos_saude" value="CIR"> CIR
      </label>
      <label class="option-label">
        <input type="checkbox" name="servicos_saude" value="CAPS AD"> CAPS AD
      </label>
      <label class="option-label">
        <input type="checkbox" name="servicos_saude" value="CAPS IJ"> CAPS IJ
      </label>
      <label class="option-label">
        <input type="checkbox" name="servicos_saude" value="CAPS 2"> CAPS 2
      </label>
      <label class="option-label">
        <input type="checkbox" name="servicos_saude" value="SAD"> SAD
      </label>
      <label class="option-label">
        <input type="checkbox" name="servicos_saude" value="CASA JAU"> CASA JAÚ
      </label>
      <label class="option-label">
        <input type="checkbox" name="servicos_saude" value="CASA JAU"> OUTROS
      </label>
    </div>
  </div>
  
  <!-- Seção para resposta NÃO -->
  <div id="vinculo-nao-details" class="subquestion" style="display: none;">
    <label>Motivo:</label>
    <textarea name="motivo_sem_vinculo" rows="3" placeholder="Descreva o motivo da falta de vínculo..."></textarea>
  </div>
</div>

<hr>     


        

<div class="submit-container">
  <button type="submit">Salvar Avaliação</button>
</div>  

</form>

<div class="resumo-container">
  <div class="metas-padrao-container">
  <h2>Metas Padrões</h2>
  <div id="metas-padrao"></div>
</div>

<div class="resumo-container">
  <!-- ... o restante do seu código existente ... -->

  <h2>Resumo e Metas</h2>
  <div id="resumo-dependencia"></div>
  <div id="resumo-acamado"></div>
  <div id="resumo-deambulacao"></div>
  <div id="resumo-interconsulta"></div>
  <div id="resumo-encaminhamento"></div>
  <div id="resumo-avp"></div>
  <div id="resumo-lesao"></div>
  <div id="resumo-dispositivos"></div>
  <div id="resumo-medicacao-sne"></div>
  <div id="resumo-banho-leito"></div>
  <div id="resumo-nutricional"></div>
  <div id="resumo-dieta-sne"></div>
  <div id="resumo-respiratorio"></div>
  <div id="resumo-aspiracao"></div>
  <div id="resumo-psicologico"></div>
  <div id="resumo-sad"></div>
  <div id="resumo-rede-apoio"></div>
  <div id="resumo-residencia"></div>
  <div id="resumo-beneficio"></div>
  <div id="resumo-vinculo-saude"></div>
</div>

<!-- Adicione este botão no final do seu resumo-container -->
<div class="resumo-container">
  <!-- ... conteúdo existente ... -->
  <button id="gerar-pdf-metas">Gerar PDF de Metas</button>
</div>


<script>
function atualizarResumoVinculoSaude() {
  const container = document.getElementById('resumo-vinculo-saude');
  const resposta = document.querySelector('input[name="vinculo_saude"]:checked');
  
  // Limpa se não selecionado ou for "Sim"
  if (!resposta || resposta.value === 'sim') {
    container.innerHTML = '';
    return;
  }

  // Texto e meta quando for "Não"
  const texto = 'Paciente não possui vínculo com a rede de saúde';
  const meta = 'Orientar consulta anual com médico de família e comunidade pela UBS pertencente';

  container.innerHTML = `
    <div class="resumo-item">
      <input type="checkbox" class="resumo-checkbox">
      <div class="resumo-texto">
        ${texto}
        <div class="meta-tag">${meta}</div>
      </div>
    </div>
  `;
}

// Função para mostrar/esconder detalhes
function toggleVinculoSaudeDetails(mostrar) {
  document.getElementById('vinculo-sim-details').style.display = mostrar ? 'block' : 'none';
  document.getElementById('vinculo-nao-details').style.display = mostrar ? 'none' : 'block';
  atualizarResumoVinculoSaude();
}

  function atualizarResumoBeneficio() {
  const container = document.getElementById('resumo-beneficio');
  const resposta = document.querySelector('input[name="beneficio"]:checked');
  
  // Limpa se não selecionado ou for "Sim"
  if (!resposta || resposta.value === 'sim') {
    container.innerHTML = '';
    return;
  }

  // Texto e meta quando for "Não"
  const texto = 'Paciente não recebe benefício do governo';
  const meta = 'Avaliar se tem direitos/Orientar sobre benefícios disponíveis';

  container.innerHTML = `
    <div class="resumo-item">
      <input type="checkbox" class="resumo-checkbox">
      <div class="resumo-texto">
        ${texto}
        <div class="meta-tag">${meta}</div>
      </div>
    </div>
  `;
}

// Função para mostrar/esconder detalhes (já existente)
function toggleBeneficioDetails(mostrar) {
  const element = document.getElementById('beneficio-sim-details');
  element.style.display = mostrar ? 'block' : 'none';
  atualizarResumoBeneficio();
}

  function atualizarResumoResidencia() {
  const container = document.getElementById('resumo-residencia');
  const resposta = document.querySelector('input[name="residencia"]:checked');
  
  // Limpa se não selecionado ou for "Sim"
  if (!resposta || resposta.value === 'sim') {
    container.innerHTML = '';
    return;
  }

  // Texto e meta quando for "Não"
  const texto = 'Paciente não possui lar/residência';
  const meta = 'Acionar rede de apoio/autoridade pertinente';

  container.innerHTML = `
    <div class="resumo-item">
      <input type="checkbox" class="resumo-checkbox">
      <div class="resumo-texto">
        ${texto}
        <div class="meta-tag">${meta}</div>
      </div>
    </div>
  `;
}

// Função para mostrar/esconder detalhes (já existente)
function toggleResidenciaDetails(mostrar) {
  const element = document.getElementById(mostrar ? 'residencia-sim-details' : 'residencia-nao-details');
  element.style.display = mostrar ? 'block' : 'none';
  atualizarResumoResidencia();
}
function atualizarResumoRedeApoio() {
  const container = document.getElementById('resumo-rede-apoio');
  const resposta = document.querySelector('input[name="rede_apoio"]:checked');
  
  // Limpa se não selecionado ou for "Sim"
  if (!resposta || resposta.value === 'sim') {
    container.innerHTML = '';
    return;
  }

  // Texto e meta quando for "Não"
  const texto = 'Paciente não possui rede de apoio';
  const meta = 'Acionar autoridade pertinente/ajuda';

  container.innerHTML = `
    <div class="resumo-item">
      <input type="checkbox" class="resumo-checkbox">
      <div class="resumo-texto">
        ${texto}
        <div class="meta-tag">${meta}</div>
      </div>
    </div>
  `;
}

  function atualizarResumoSAD() {
  const container = document.getElementById('resumo-sad');
  const respostaSAD = document.querySelector('input[name="sad"]:checked');
  
  // Limpa se não selecionado ou for "Não"
  if (!respostaSAD || respostaSAD.value === 'nao') {
    container.innerHTML = '';
    return;
  }

  // Texto base
  const texto = 'Paciente necessita do SAD';
  
  // Metas solicitadas (duas metas separadas)
  const metas = [
    'Preparar documentação completa',
    'Entrar em contato com o SAD para agendamento'
  ];

  // HTML final
  container.innerHTML = `
    <div class="resumo-item">
      <input type="checkbox" class="resumo-checkbox">
      <div class="resumo-texto">
        ${texto}
        <div class="metas-container">
          ${metas.map(meta => `<div class="meta-tag">${meta}</div>`).join('')}
        </div>
      </div>
    </div>
  `;
}
function atualizarResumoAspiracao() {
  const container = document.getElementById('resumo-aspiracao');
  const aspiracao = document.querySelector('input[name="aspiracao_pos_alta"]:checked');
  
  if (!aspiracao || aspiracao.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const possibilidade = document.querySelector('input[name="possibilidade_aspiracao"]:checked');
  let texto = 'Necessita de aspiração';
  let meta = '';
  
  if (possibilidade) {
    texto += ` (Possibilidade pós alta: ${possibilidade.value === 'sim' ? 'Sim' : possibilidade.value === 'nao' ? 'Não' : 'Talvez'})`;
    
    if (possibilidade.value === 'sim' || possibilidade.value === 'talvez') {
      meta = 'Meta: Promover ensino qualificado pela equipe de fisioterapia';
    }
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}

function atualizarResumoRespiratorio() {
  const container = document.getElementById('resumo-respiratorio');
  const cuidadosRespiratorios = document.querySelector('input[name="cuidados_respiratorios"]:checked');
  
  if (!cuidadosRespiratorios || cuidadosRespiratorios.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const dispositivos = document.querySelectorAll('input[name="tipo_cuidado"]:checked');
  let texto = 'Cuidados respiratórios: ';
  let metas = [];
  
  const dispositivosSelecionados = Array.from(dispositivos).map(el => el.value);
  
  if (dispositivosSelecionados.length > 0) {
    texto += dispositivosSelecionados.map(d => {
      switch(d) {
        case 'oxigenio': return 'Oxigênio';
        case 'cpap': return 'CPAP';
        case 'tqt': return 'TQT';
        case 'outros': return document.querySelector('input[name="outros_cuidados"]').value || 'Outros';
        default: return d;
      }
    }).join(', ');
    
    // Verifica cada dispositivo e adiciona metas específicas
    if (dispositivosSelecionados.includes('oxigenio') || dispositivosSelecionados.includes('cpap')) {
      metas.push('Realizar documentação');
    }
    
    if (dispositivosSelecionados.includes('tqt')) {
      metas.push('Avaliar possibilidade de troca, oclusão ou decanular');
    }
    
    // Meta para outros dispositivos se especificado
    if (dispositivosSelecionados.includes('outros')) {
      const outros = document.querySelector('input[name="outros_cuidados"]').value;
      if (outros) {
        metas.push(`Avaliar dispositivo: ${outros}`);
      }
    }
  } else {
    texto += 'não especificados';
  }
  
  // Remove metas duplicadas e cria o HTML
  const metasUnicas = [...new Set(metas)];
  const metasHTML = metasUnicas.map(meta => `<span class="meta-tag">${meta}</span>`).join('');
  
  container.innerHTML = criarItemResumo(texto, metasHTML);
}

  function atualizarResumoDietaSNE() {
  const container = document.getElementById('resumo-dieta-sne');
  const dietaSNE = document.querySelector('input[name="dieta_sne_gtt"]:checked');
  
  if (!dietaSNE || dietaSNE.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const altaDieta = document.querySelector('input[name="alta_dieta_sne_gtt"]:checked');
  let texto = 'Recebe dieta por SNE/GTT';
  let meta = '';
  
  if (altaDieta) {
    texto += ` (Possibilidade de alta: ${altaDieta.value === 'sim' ? 'Sim' : 
              altaDieta.value === 'nao' ? 'Não' : 'Talvez'})`;
    
    if (altaDieta.value === 'sim' || altaDieta.value === 'talvez') {
      meta = 'Meta: Promover ensino qualificado para esse cuidado pela equipe de nutrição';
    }
    else if (altaDieta.value === 'nao') {
      meta = 'Meta: Proporcionar intervenção nutricional adequada';
    }
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}

// Funções auxiliares
function toggleDietaSNEGTT(mostrar) {
  const element = document.getElementById('dieta-sne-gtt-sim-details');
  element.style.display = mostrar ? 'block' : 'none';
  if (!mostrar) {
    element.querySelectorAll('input').forEach(input => {
      input.checked = false;
    });
  }
  atualizarResumoDietaSNE();
}

function toggleEnsinoNutricao(mostrar) {
  // Esta função pode ser usada para lógicas adicionais se necessário
  atualizarResumoDietaSNE();
}

 function atualizarResumoNutricional() {
  const container = document.getElementById('resumo-nutricional');
  const suporteNutricional = document.querySelector('input[name="suporte_nutricional"]:checked');
  
  if (!suporteNutricional || suporteNutricional.value === 'sim') {
    container.innerHTML = '';
    return;
  }
  
  const solicitacaoNutricional = document.querySelector('input[name="solicitacao_nutricional"]:checked');
  let texto = 'Suporte nutricional inadequado';
  let meta = 'Meta: Prover intervenção nutricional adequada.';
  
  if (solicitacaoNutricional) {
    if (solicitacaoNutricional.value === 'sim') {
      const dataSolicitacao = document.querySelector('input[name="data_solicitacao_nutricional"]').value;
      texto += ` (Já solicitado${dataSolicitacao ? ` em ${dataSolicitacao}` : ''})`;
      meta = 'Meta: Reavaliar intervenção nutricional';
    } else {
      texto += ' (Não solicitado)';
    }
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}

// Funções auxiliares (já existentes no seu código)
function toggleSuporteNutricionalDetails(mostrar) {
  const element = document.getElementById('suporte-nao-details');
  element.style.display = mostrar ? 'none' : 'block';
  if (!mostrar) {
    element.querySelectorAll('input').forEach(input => {
      if (input.type !== 'radio') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.getElementById('data-solicitacao-container').style.display = 'none';
  }
  atualizarResumoNutricional();
}

function toggleDataSolicitacao(mostrar) {
  const element = document.getElementById('data-solicitacao-container');
  element.style.display = mostrar ? 'block' : 'none';
  if (!mostrar) {
    element.querySelector('input').value = '';
  }
  atualizarResumoNutricional();
}
  function atualizarResumoBanhoLeito() {
  const container = document.getElementById('resumo-banho-leito');
  const banhoLeito = document.querySelector('input[name="banho_leito"]:checked');
  
  if (!banhoLeito || banhoLeito.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const possibilidadeBanho = document.querySelector('input[name="possibilidade_banho_leito"]:checked');
  let texto = 'Necessita banho no leito';
  let meta = '';
  
  if (possibilidadeBanho) {
    texto += ` (Possibilidade pós alta: ${possibilidadeBanho.value === 'sim' ? 'Sim' : possibilidadeBanho.value === 'nao' ? 'Não' : 'Talvez'})`;
    
    if (possibilidadeBanho.value === 'sim' || possibilidadeBanho.value === 'talvez') {
      meta = 'Meta: Promover ensino qualificado para este cuidado pela equipe de enfermagem';
    }
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}
function atualizarResumoMedicacaoSNE() {
  const container = document.getElementById('resumo-medicacao-sne');
  const medicacaoSNE = document.querySelector('input[name="medicacao_sne_gtt"]:checked');
  
  if (!medicacaoSNE || medicacaoSNE.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const altaSNE = document.querySelector('input[name="alta_sne_gtt"]:checked');
  let texto = 'Recebe medicação por SNE/GTT';
  let meta = '';
  
  if (altaSNE) {
    if (altaSNE.value === 'sim' || altaSNE.value === 'talvez') {
      meta = 'Meta: Promover ensino qualificado para este cuidado pela equipe de enfermagem';
    }
    
    // Adiciona a informação sobre a possibilidade de alta
    texto += ` (Possibilidade de alta: ${altaSNE.value === 'sim' ? 'Sim' : altaSNE.value === 'nao' ? 'Não' : 'Talvez'})`;
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}
  function atualizarResumoDispositivos() {
  const container = document.getElementById('resumo-dispositivos');
  const dispositivos = document.querySelector('input[name="dispositivos"]:checked');
  
  if (!dispositivos || dispositivos.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const tiposDispositivos = document.querySelectorAll('input[name="dispositivos_tipo"]:checked');
  let texto = 'Dispositivos: ';
  let metas = []; // Array para armazenar múltiplas metas
  
  const dispositivosSelecionados = Array.from(tiposDispositivos).map(el => el.value);
  
  if (dispositivosSelecionados.length > 0) {
    texto += dispositivosSelecionados.join(', ');
    
    // Verifica cada dispositivo selecionado e adiciona metas específicas
    dispositivosSelecionados.forEach(dispositivo => {
      switch(dispositivo) {
        case 'SNE/SNG':
        case 'SVD/SVA':
          metas.push('Avaliar possibilidade de retirada');
          break;
        case 'AVC':
          metas.push('Avaliar sinais flogísticos e possibilidade de retirada');
          break;
        case 'AVP':
          metas.push('Avaliar sinais flogísticos');
          break;
        case 'outros':
          const outrosDispositivos = document.querySelector('input[name="outros_dispositivos"]').value;
          if (outrosDispositivos) {
            metas.push(`Avaliar dispositivo: ${outrosDispositivos}`);
          }
          break;
      }
    });
  } else {
    texto += 'não especificados';
  }
  
  // Remove metas duplicadas e cria o HTML
  const metasUnicas = [...new Set(metas)];
  const metasHTML = metasUnicas.map(meta => `<span class="meta-tag">${meta}</span>`).join('');
  
  container.innerHTML = criarItemResumo(texto, metasHTML);
}
  function atualizarResumoAVP() {
  const container = document.getElementById('resumo-avp');
  const avp = document.querySelector('input[name="avp"]:checked');
  
  if (!avp || avp.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const selectDificuldade = document.querySelector('select[name="dificuldade_avp"]');
  const dificuldade = selectDificuldade.value;
  let texto = 'Acesso Venoso Periférico: ';
  let meta = '';
  
  if (dificuldade === 'facil') {
    texto += 'Fácil';
    meta = 'Meta: Manter acesso';
  } 
  else if (dificuldade === 'medio') {
    texto += 'Médio';
    meta = 'Meta: Avaliar necessidade de cateter';
  } 
  else if (dificuldade === 'dificil') {
    texto += 'Difícil';
    meta = 'Meta: Passar PICC';
  } 
  else {
    texto += 'Dificuldade não especificada';
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}
// Função para mostrar/ocultar o campo "Outros" no encaminhamento
function toggleOutrosEncaminhamento(checkbox) {
  const outrosDetalhes = document.getElementById('outros-encaminhamento-detalhes');
  outrosDetalhes.style.display = checkbox.checked ? 'block' : 'none';
  
  if (!checkbox.checked) {
    document.querySelector('input[name="outra_especialidade_encaminhamento"]').value = '';
  }
}

// Função para atualizar o resumo do encaminhamento (substitua a atual)
function atualizarResumoEncaminhamento() {
  const container = document.getElementById('resumo-encaminhamento');
  const encaminhamento = document.querySelector('input[name="encaminhamento"]:checked');
  
  if (!encaminhamento || encaminhamento.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const especialidades = document.querySelectorAll('input[name="especialidade_encaminhamento[]"]:checked');
  let texto = 'Necessita encaminhamento para: ';
  let meta = 'Meta: Realizar documentação';
  
  const especialidadesSelecionadas = Array.from(especialidades).map(el => {
    if (el.value === 'outros') {
      return document.querySelector('input[name="outra_especialidade_encaminhamento"]').value || 'Outros';
    }
    return el.value;
  });
  
  if (especialidadesSelecionadas.length > 0) {
    texto += especialidadesSelecionadas.join(', ');
    if (especialidadesSelecionadas.length > 1) {
      meta += ' para múltiplas especialidades';
    }
  } else {
    texto += 'especialidade não especificada';
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}
function gerarMetasPadrao() {
  const container = document.getElementById('metas-padrao');
  
  // Lista de metas padrões
  const metasPadrao = [
    "1. Internação hospitalar",
    "2. Antibioticoterapia",
    "3. Suporte clínico e cuidados de enfermaria"
  ];
  
  // Limpa o container antes de adicionar as metas
  container.innerHTML = '';
  
  // Adiciona cada meta ao container
  metasPadrao.forEach(meta => {
    const metaElement = document.createElement('div');
    metaElement.className = 'meta-padrao-item';
    metaElement.innerHTML = `
      <input type="checkbox" class="resumo-checkbox">
      <div class="resumo-texto">
        ${meta}
        <span class="meta-tag">Meta padrão</span>
      </div>
    `;
    container.appendChild(metaElement);
  });
}

// Chame esta função quando o DOM estiver carregado
document.addEventListener('DOMContentLoaded', function() {
  gerarMetasPadrao();
  // ... o restante do seu código de inicialização ...
});
  // Função para atualizar todos os resumos
function atualizarResumos() {
  atualizarResumoDependencia();
  atualizarResumoAcamado();
  atualizarResumoDeambulacao();
  atualizarResumoInterconsulta();
  atualizarResumoEncaminhamento();
  atualizarResumoAVP();
  atualizarResumoLesao();
  atualizarResumoDispositivos();
  atualizarResumoMedicacaoSNE();
  atualizarResumoBanhoLeito();
  atualizarResumoNutricional();
  atualizarResumoDietaSNE();
  atualizarResumoRespiratorio();
  atualizarResumoAspiracao();
  atualizarResumoSAD();
  atualizarResumoRedeApoio();
  atualizarResumoResidencia();
  atualizarResumoBeneficio();
  atualizarResumoVinculoSaude();
}

// Funções individuais para cada resumo
function atualizarResumoDependencia() {
  const container = document.getElementById('resumo-dependencia');
  const dependente = document.querySelector('input[name="dependente"]:checked');
  
  if (!dependente || dependente.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const grau = document.querySelector('input[name="grau_dependencia"]:checked');
  let texto = 'Paciente é dependente';
  let meta = '';
  
  if (grau) {
    texto += ` (${grau.value === 'parcial' ? 'Dependente Parcial' : 'Dependente Total'})`;
    meta = 'Meta: Avaliar necessidade de cuidador';
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}

function atualizarResumoAcamado() {
  const container = document.getElementById('resumo-acamado');
  const acamado = document.querySelector('input[name="acamado"]:checked');

  if (!acamado || acamado.value === 'nao') {
    container.innerHTML = '';
    return;
  }

  const tempo = document.querySelector('input[name="tempo_acamado"]:checked');

  const meta1 = 'Colchão pneumática';
  const meta2 = 'Realizar mudança de decúbito de 2/2 h';

  container.innerHTML = `${meta1}<br>${meta2}`;
}




function atualizarResumoDeambulacao() {
  const container = document.getElementById('resumo-deambulacao');
  const deambula = document.querySelector('input[name="deambulacao"]:checked');
  
  if (!deambula || deambula.value === 'sim') {
    container.innerHTML = '';
    return;
  }
  
  const tipo = document.querySelector('input[name="tipo_deambulacao"]:checked');
  let texto = '';
  let meta = 'Realizar  reabilitações motoras e  ';
  
  if (tipo) {
    texto += ` (${tipo.value === 'com_auxilio' ? 'Precisa de auxílio' : 'Não deambula'})`;
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}

function atualizarResumoInterconsulta() {
  const container = document.getElementById('resumo-interconsulta');
  const interconsulta = document.querySelector('input[name="interconsulta"]:checked');
  
  if (!interconsulta || interconsulta.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const especialidades = document.querySelectorAll('input[name="especialidade_interconsulta"]:checked');
  let texto = 'Necessita interconsulta com: ';
  let meta = 'Meta: Realizar documentação';
  
  const especialidadesSelecionadas = Array.from(especialidades).map(el => {
    if (el.value === 'outros') {
      return document.querySelector('input[name="outra_especialidade"]').value || 'Outros';
    }
    return el.value;
  });
  
  if (especialidadesSelecionadas.length > 0) {
    texto += especialidadesSelecionadas.join(', ');
    if (especialidadesSelecionadas.length > 1) {
      meta += ' para múltiplas especialidades';
    }
  } else {
    texto += 'especialidade não especificada';
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}

function atualizarResumoEncaminhamento() {
  const container = document.getElementById('resumo-encaminhamento');
  const encaminhamento = document.querySelector('input[name="encaminhamento"]:checked');
  
  if (!encaminhamento || encaminhamento.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const especialidade = document.querySelector('select[name="especialidade_encaminhamento"]');
  let texto = 'Necessita encaminhamento';
  let meta = 'Meta: Realizar documentação';
  
  if (especialidade && especialidade.value) {
    texto += ` para ${especialidade.value}`;
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}

// Função auxiliar para criar os itens de resumo
function criarItemResumo(texto, meta = '') {
  return `
    <div class="resumo-item">
      <input type="checkbox" class="resumo-checkbox">
      <div class="resumo-texto">
        ${texto}
        ${meta ? '<span class="meta-tag">' + meta + '</span>' : ''}
      </div>
    </div>
  `;
}

// Adicione listeners para atualizar os resumos quando o formulário muda
document.addEventListener('DOMContentLoaded', function() {
  // Adicione listeners para todas as perguntas
  const todasPerguntas = document.querySelectorAll('input[type="radio"], input[type="checkbox"], select');
  todasPerguntas.forEach(elemento => {
    elemento.addEventListener('change', atualizarResumos);
  });
  
  // Atualize os resumos inicialmente
  atualizarResumos();
});

// Implemente as outras funções de atualização de resumo seguindo o mesmo padrão
// (atualizarResumoAVP, atualizarResumoLesao, etc.) conforme suas necessidades
// Cada uma deve verificar as respostas e gerar o texto e meta apropriados

// Exemplo para a pergunta de lesão por pressão:
function atualizarResumoLesao() {
  const container = document.getElementById('resumo-lesao');
  const lesao = document.querySelector('input[name="lesao"]:checked');
  
  if (!lesao || lesao.value === 'nao') {
    container.innerHTML = '';
    return;
  }
  
  const locais = document.querySelectorAll('input[name="local_lesao"]:checked');
  const grau = document.querySelector('input[name="grau_lesao"]:checked');
  
  let texto = 'Lesão por pressão: ';
  let meta = 'Meta: Comissão de feridas';
  
  const locaisSelecionados = Array.from(locais).map(el => {
    if (el.value === 'outros') {
      return document.querySelector('input[name="outro_local_lesao"]').value || 'Outro local';
    }
    return el.value;
  });
  
  if (locaisSelecionados.length > 0) {
    texto += locaisSelecionados.join(', ');
  } else {
    texto += 'local não especificado';
  }
  
  if (grau) {
    texto += ` (Grau ${grau.value})`;
  }
  
  container.innerHTML = criarItemResumo(texto, meta);
}

// Implemente as demais funções seguindo o mesmo padrão
// Funções para controle da pergunta 20
function toggleAspiracaoPosAlta(necessitaAspiracao) {
  const container = document.getElementById('aspiracao-sim-details');
  container.style.display = necessitaAspiracao ? 'block' : 'none';
  
  if (!necessitaAspiracao) {
    // Limpa todos os campos quando escondidos
    container.querySelectorAll('input').forEach(input => {
      if (input.type !== 'radio') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.getElementById('ensino-aspiracao-details').style.display = 'none';
  }
}

function toggleEnsinoAspiracao(mostrar) {
  const ensinoContainer = document.getElementById('ensino-aspiracao-details');
  ensinoContainer.style.display = mostrar ? 'block' : 'none';
  
  if (!mostrar) {
    // Limpa os campos de ensino se ocultados
    ensinoContainer.querySelectorAll('input').forEach(input => {
      input.checked = false;
    });
  }
}

// Configura eventos quando o DOM estiver carregado
document.addEventListener('DOMContentLoaded', function() {
  // Eventos para a pergunta principal
  document.querySelectorAll('input[name="aspiracao_pos_alta"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleAspiracaoPosAlta(this.value === 'sim');
    });
  });
  
  // Eventos para a subpergunta de possibilidade
  document.querySelectorAll('input[name="possibilidade_aspiracao"]').forEach(radio => {
    radio.addEventListener('change', function() {
      const mostrarEnsino = this.value === 'sim' || this.value === 'talvez';
      toggleEnsinoAspiracao(mostrarEnsino);
    });
  });
});

  // Funções para controle da pergunta 19
function toggleBanhoLeito(necessitaBanhoLeito) {
  const container = document.getElementById('banho-leito-sim-details');
  container.style.display = necessitaBanhoLeito ? 'block' : 'none';
  
  if (!necessitaBanhoLeito) {
    // Limpa todos os campos quando escondidos
    container.querySelectorAll('input').forEach(input => {
      if (input.type !== 'radio') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.getElementById('ensino-banho-leito-details').style.display = 'none';
  }
}

function toggleEnsinoBanhoLeito(mostrar) {
  const ensinoContainer = document.getElementById('ensino-banho-leito-details');
  ensinoContainer.style.display = mostrar ? 'block' : 'none';
  
  if (!mostrar) {
    // Limpa os campos de ensino se ocultados
    ensinoContainer.querySelectorAll('input').forEach(input => {
      input.checked = false;
    });
  }
}

// Configura eventos quando o DOM estiver carregado
document.addEventListener('DOMContentLoaded', function() {
  // Eventos para a pergunta principal
  document.querySelectorAll('input[name="banho_leito"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleBanhoLeito(this.value === 'sim');
    });
  });
  
  // Eventos para a subpergunta de possibilidade
  document.querySelectorAll('input[name="possibilidade_banho_leito"]').forEach(radio => {
    radio.addEventListener('change', function() {
      const mostrarEnsino = this.value === 'sim' || this.value === 'talvez';
      toggleEnsinoBanhoLeito(mostrarEnsino);
    });
  });
});

// Funções para controle da pergunta 18
function toggleDietaSNEGTT(recebeDieta) {
  const container = document.getElementById('dieta-sne-gtt-sim-details');
  container.style.display = recebeDieta ? 'block' : 'none';
  
  if (!recebeDieta) {
    // Limpa todos os campos quando escondidos
    container.querySelectorAll('input').forEach(input => {
      if (input.type !== 'radio') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.getElementById('ensino-nutricao-details').style.display = 'none';
  }
}

function toggleEnsinoNutricao(mostrar) {
  const ensinoContainer = document.getElementById('ensino-nutricao-details');
  ensinoContainer.style.display = mostrar ? 'block' : 'none';
  
  if (!mostrar) {
    // Limpa os campos de ensino se ocultados
    ensinoContainer.querySelectorAll('input').forEach(input => {
      input.checked = false;
    });
  }
}

// Configura eventos quando o DOM estiver carregado
document.addEventListener('DOMContentLoaded', function() {
  // Eventos para a pergunta principal
  document.querySelectorAll('input[name="dieta_sne_gtt"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleDietaSNEGTT(this.value === 'sim');
    });
  });
  
  // Eventos para a subpergunta de alta
  document.querySelectorAll('input[name="alta_dieta_sne_gtt"]').forEach(radio => {
    radio.addEventListener('change', function() {
      const mostrarEnsino = this.value === 'sim' || this.value === 'talvez';
      toggleEnsinoNutricao(mostrarEnsino);
    });
  });
});
// Funções para controle da pergunta 17
function toggleMedicacaoSNEGTT(usaSNEGTT) {
  const container = document.getElementById('sne-gtt-sim-details');
  container.style.display = usaSNEGTT ? 'block' : 'none';
  
  if (!usaSNEGTT) {
    // Limpa todos os campos quando escondidos
    container.querySelectorAll('input').forEach(input => {
      if (input.type !== 'radio') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.getElementById('ensino-enfermagem-details').style.display = 'none';
  }
}

function toggleEnsinoEnfermagem(mostrar) {
  const ensinoContainer = document.getElementById('ensino-enfermagem-details');
  ensinoContainer.style.display = mostrar ? 'block' : 'none';
  
  if (!mostrar) {
    // Limpa os campos de ensino se ocultados
    ensinoContainer.querySelectorAll('input').forEach(input => {
      input.checked = false;
    });
  }
}

// Configura eventos quando o DOM estiver carregado
document.addEventListener('DOMContentLoaded', function() {
  // Eventos para a pergunta principal
  document.querySelectorAll('input[name="medicacao_sne_gtt"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleMedicacaoSNEGTT(this.value === 'sim');
    });
  });
  
  // Eventos para a subpergunta de alta
  document.querySelectorAll('input[name="alta_sne_gtt"]').forEach(radio => {
    radio.addEventListener('change', function() {
      const mostrarEnsino = this.value === 'sim' || this.value === 'talvez';
      toggleEnsinoEnfermagem(mostrarEnsino);
    });
  });
});
// Funções para controle da pergunta 16
function toggleDispositivos(usaDispositivos) {
  document.getElementById('dispositivos-sim-details').style.display = usaDispositivos ? 'block' : 'none';
  
  // Limpa os campos quando escondidos
  if (!usaDispositivos) {
    document.getElementById('dispositivos-sim-details').querySelectorAll('input').forEach(input => {
      if (input.type !== 'checkbox') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.getElementById('outros-dispositivos-detalhe').style.display = 'none';
  }
}

function toggleOutrosDispositivos(mostrar) {
  const outrosDetalhe = document.getElementById('outros-dispositivos-detalhe');
  outrosDetalhe.style.display = mostrar ? 'block' : 'none';
  
  if (!mostrar) {
    outrosDetalhe.querySelector('input').value = '';
  }
}

// Adiciona ao evento DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
  // Configura eventos para a pergunta 16
  document.querySelectorAll('input[name="dispositivos"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleDispositivos(this.value === 'sim');
    });
  });
  
  // Configura eventos para outros dispositivos
  document.querySelector('input[name="dispositivos_tipo"][value="outros"]')
    .addEventListener('change', function() {
      toggleOutrosDispositivos(this.checked);
    });
});
// Funções para controle da pergunta 15
function toggleAcompanhamentoPsicologico(temAcompanhamento) {
  document.getElementById('psicologico-sim-details').style.display = temAcompanhamento ? 'block' : 'none';
  document.getElementById('psicologico-nao-details').style.display = temAcompanhamento ? 'none' : 'block';
  
  // Limpa os campos quando escondidos
  if (!temAcompanhamento) {
    document.getElementById('psicologico-sim-details').querySelectorAll('input').forEach(input => {
      input.checked = false;
    });
  } else {
    document.getElementById('psicologico-nao-details').querySelectorAll('input').forEach(input => {
      if (input.type !== 'radio') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.getElementById('outros-motivos-psicologico').style.display = 'none';
  }
}

function toggleOutrosMotivosPsicologico(mostrar) {
  const outrosMotivos = document.getElementById('outros-motivos-psicologico');
  outrosMotivos.style.display = mostrar ? 'block' : 'none';
  
  if (!mostrar) {
    outrosMotivos.querySelector('input').value = '';
  }
}

// Adicione ao seu evento DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
  // Configura eventos para a pergunta 15
  document.querySelectorAll('input[name="acompanhamento_psicologico"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleAcompanhamentoPsicologico(this.value === 'sim');
    });
  });
  
  // Configura eventos para motivos
  document.querySelectorAll('input[name="motivo_sem_psicologico"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleOutrosMotivosPsicologico(this.value === 'outros');
    });
  });
});

// Funções para controle da pergunta 14
function toggleSuporteNutricionalDetails(temSuporte) {
  const naoDetails = document.getElementById('suporte-nao-details');
  naoDetails.style.display = temSuporte ? 'none' : 'block';
  
  // Limpa os campos quando escondidos
  if (temSuporte) {
    naoDetails.querySelectorAll('input').forEach(input => {
      if (input.type !== 'radio') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.getElementById('data-solicitacao-container').style.display = 'none';
  }
}

function toggleDataSolicitacao(mostrar) {
  const container = document.getElementById('data-solicitacao-container');
  container.style.display = mostrar ? 'block' : 'none';
  
  if (!mostrar) {
    container.querySelector('input').value = '';
  }
}

// Adicione ao seu evento DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
  // Configura eventos para a pergunta 14
  document.querySelectorAll('input[name="suporte_nutricional"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleSuporteNutricionalDetails(this.value === 'sim');
    });
  });
  
  // Configura eventos para solicitação nutricional
  document.querySelectorAll('input[name="solicitacao_nutricional"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleDataSolicitacao(this.value === 'sim');
    });
  });
});
// Funções para controle da pergunta 13
function toggleCuidadosRespiratorios(necessitaCuidados) {
  const detailsElement = document.getElementById('cuidados-respiratorios-details');
  detailsElement.style.display = necessitaCuidados ? 'block' : 'none';
  
  // Limpa os campos quando escondidos
  if (!necessitaCuidados) {
    detailsElement.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
      checkbox.checked = false;
    });
    document.getElementById('outros-cuidados-detalhes').style.display = 'none';
    document.querySelector('input[name="outros_cuidados"]').value = '';
  }
}

function toggleOutrosCuidados(checkbox) {
  const outrosDetalhes = document.getElementById('outros-cuidados-detalhes');
  outrosDetalhes.style.display = checkbox.checked ? 'block' : 'none';
  
  if (!checkbox.checked) {
    document.querySelector('input[name="outros_cuidados"]').value = '';
  }
}

// Adicione ao seu evento DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
  // Configura eventos para a pergunta 13
  document.querySelectorAll('input[name="cuidados_respiratorios"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleCuidadosRespiratorios(this.value === 'sim');
    });
  });
});
// Funções para controle da pergunta 12
function toggleVinculoSaudeDetails(possuiVinculo) {
  document.getElementById('vinculo-sim-details').style.display = possuiVinculo ? 'block' : 'none';
  document.getElementById('vinculo-nao-details').style.display = possuiVinculo ? 'none' : 'block';
  
  // Limpa os campos quando escondidos
  if (!possuiVinculo) {
    const simSection = document.getElementById('vinculo-sim-details');
    simSection.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
      checkbox.checked = false;
    });
  } else {
    document.getElementById('vinculo-nao-details').querySelector('textarea').value = '';
  }
}

// Adicione ao seu evento DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
  // Configura eventos para a pergunta 12
  document.querySelectorAll('input[name="vinculo_saude"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleVinculoSaudeDetails(this.value === 'sim');
    });
  });
});


// Funções para controle da pergunta 11
function toggleBeneficioDetails(recebeBeneficio) {
  document.getElementById('beneficio-sim-details').style.display = recebeBeneficio ? 'block' : 'none';
  document.getElementById('beneficio-nao-details').style.display = recebeBeneficio ? 'none' : 'block';
  
  // Limpa os campos quando escondidos
  if (!recebeBeneficio) {
    const simSection = document.getElementById('beneficio-sim-details');
    simSection.querySelectorAll('input').forEach(input => {
      input.checked = false;
    });
    document.getElementById('bpc-details').style.display = 'none';
  } else {
    const naoSection = document.getElementById('beneficio-nao-details');
    naoSection.querySelectorAll('input').forEach(input => {
      input.checked = false;
    });
  }
}

function toggleBPCDetails(show) {
  const element = document.getElementById('bpc-details');
  element.style.display = show ? 'block' : 'none';
  if (!show) {
    element.querySelectorAll('input').forEach(input => {
      input.checked = false;
    });
  }
}

// Adicione ao seu evento DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
  // Configura eventos para a pergunta 11
  document.querySelectorAll('input[name="beneficio"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleBeneficioDetails(this.value === 'sim');
    });
  });
  
  // Configura eventos para o tipo de benefício
  document.querySelectorAll('input[name="tipo_beneficio"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleBPCDetails(this.value === 'bpc');
    });
  });
});
  // Funções para controle da pergunta 10
function toggleResidenciaDetails(temResidencia) {
  document.getElementById('residencia-sim-details').style.display = temResidencia ? 'block' : 'none';
  document.getElementById('residencia-nao-details').style.display = temResidencia ? 'none' : 'block';
  
  // Limpa os campos quando escondidos
  if (!temResidencia) {
    const simSection = document.getElementById('residencia-sim-details');
    simSection.querySelectorAll('input, select').forEach(input => {
      if (input.type !== 'radio' && input.type !== 'checkbox') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.querySelectorAll('#residencia-sim-details .subdetalhe').forEach(el => {
      el.style.display = 'none';
    });
  } else {
    const naoSection = document.getElementById('residencia-nao-details');
    naoSection.querySelectorAll('input').forEach(input => {
      if (input.type !== 'radio' && input.type !== 'checkbox') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.querySelectorAll('#residencia-nao-details .subdetalhe').forEach(el => {
      el.style.display = 'none';
    });
  }
}

function toggleRedeApoioDetails(show) {
  const element = document.getElementById('rede-apoio-details');
  element.style.display = show ? 'block' : 'none';
  if (!show) {
    element.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
      checkbox.checked = false;
    });
  }
  // Esconde a seção de autoridades se estiver visível
  document.getElementById('autoridades-details').style.display = 'none';
}

function toggleAutoridadesDetails(show) {
  const element = document.getElementById('autoridades-details');
  element.style.display = show ? 'block' : 'none';
  if (!show) {
    element.querySelectorAll('input').forEach(input => {
      if (input.type !== 'radio' && input.type !== 'checkbox') {
        input.value = '';
      } else {
        input.checked = false;
      }
    });
    document.getElementById('outros-autoridades-detalhes').style.display = 'none';
  }
  // Esconde a seção de rede de apoio se estiver visível
  document.getElementById('rede-apoio-details').style.display = 'none';
}

function toggleOutrosAutoridades(show) {
  const element = document.getElementById('outros-autoridades-detalhes');
  element.style.display = show ? 'block' : 'none';
  if (!show) {
    element.querySelector('input').value = '';
  }
}

// Adicione estas funções ao seu evento DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
  // Configura eventos para a pergunta 10
  document.querySelectorAll('input[name="residencia"]').forEach(radio => {
    radio.addEventListener('change', function() {
      toggleResidenciaDetails(this.value === 'sim');
    });
  });
});
  function selecionarLocalLesao() {
  const localSelecionado = document.querySelector('input[name="local_lesao"]:checked').value;
  const outrosDetalhes = document.getElementById('outros-lesao-detalhes');
  const grauContainer = document.getElementById('grau-lesao-container');
  
  // Mostra sempre o campo de grau quando qualquer local é selecionado
  grauContainer.style.display = 'block';
  
  // Mostra ou esconde o campo "Outros" conforme necessário
  if (localSelecionado === 'outros') {
    outrosDetalhes.style.display = 'block';
  } else {
    outrosDetalhes.style.display = 'none';
    // Limpa o campo de texto quando não selecionado
    document.querySelector('input[name="outro_local_lesao"]').value = '';
  }
}

// Inicialização para garantir que os campos aparecem corretamente ao carregar
document.addEventListener('DOMContentLoaded', function() {
  const lesaoDetails = document.getElementById('lesao-details');
  const localLesao = document.querySelector('input[name="local_lesao"]:checked');
  
  if (localLesao) {
    document.getElementById('grau-lesao-container').style.display = 'block';
    
    if (localLesao.value === 'outros') {
      document.getElementById('outros-lesao-detalhes').style.display = 'block';
    }
  }
  
  // Limpa todos os campos se mudar para "Não"
  document.querySelectorAll('input[name="lesao"]').forEach(radio => {
    radio.addEventListener('change', function() {
      if (this.value === 'nao') {
        // Limpa todos os inputs dentro da lesão-details
        const inputs = lesaoDetails.querySelectorAll('input');
        inputs.forEach(input => {
          if (input.type === 'radio' || input.type === 'checkbox') {
            input.checked = false;
          } else {
            input.value = '';
          }
        });
        // Esconde os containers
        document.getElementById('outros-lesao-detalhes').style.display = 'none';
        document.getElementById('grau-lesao-container').style.display = 'none';
      }
    });
  });
});

// Adicione eventos aos radios
document.querySelectorAll('input[name="especialidade_interconsulta"]').forEach(radio => {
  radio.addEventListener('change', toggleOutrosEspecialidade);
});

// Inicialize a verificação
document.addEventListener('DOMContentLoaded', toggleOutrosEspecialidade);
// Funções para mostrar/ocultar subquestões
function toggleSubquestion(elementId, show) {
  const element = document.getElementById(elementId);
  if (element) {
    element.style.display = show ? 'block' : 'none';
    
    // Limpa campos quando ocultado
    if (!show) {
      const inputs = element.querySelectorAll('input, select');
      inputs.forEach(input => {
        if (input.type !== 'radio' && input.type !== 'checkbox') {
          input.value = '';
        } else {
          input.checked = false;
        }
      });
    }
  }
}

// Função específica para o PICC
function togglePICC(selectElement) {
  const piccDetails = document.getElementById('picc-details');
  if (piccDetails) {
    piccDetails.style.display = selectElement.value === 'dificil' ? 'block' : 'none';
    
    // Limpa campos quando ocultado
    if (selectElement.value !== 'dificil') {
      const inputs = piccDetails.querySelectorAll('input');
      inputs.forEach(input => input.checked = false);
    }
  }
}
document.addEventListener('DOMContentLoaded', function() {
  // Lista de todas as questões de rádio do formulário
  const todasQuestoes = [
    'dependente', 'acamado', 'deambulacao', 'sad', 'interconsulta', 
    'encaminhamento', 'avp', 'lesao', 'rede_apoio', 'residencia', 
    'beneficio', 'respiratorio', 'psicologico', 'nutricional'
  ];

  // Desmarca todas as opções
  todasQuestoes.forEach(nome => {
    const radios = document.querySelectorAll(`input[name="${nome}"]`);
    radios.forEach(radio => radio.checked = false);
  });

  // Esconde todas as subseções
  document.querySelectorAll('.subquestion').forEach(el => {
    el.style.display = 'none';
  });
});

// Adicione esta função ao seu script
function toggleOutrosEspecialidade(checkbox) {
  const outrosDetalhes = document.getElementById('outros-interconsulta-detalhes');
  if (checkbox.checked && checkbox.value === 'outros') {
    outrosDetalhes.style.display = 'block';
  } else {
    outrosDetalhes.style.display = 'none';
    document.querySelector('input[name="outra_especialidade"]').value = '';
  }
}
</script>
<script src="script/script2.js"></script>
<script src="script/generatePDF.js"></script> 
<script src="script/metaspdf.js"></script> 
</html>